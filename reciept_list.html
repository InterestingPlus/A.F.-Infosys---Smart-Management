<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A.F. Infosys Dashboard</title>
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <style>
      /* General styles and resets */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: #f3f4f6;
        min-height: max(884px, 100dvh);
        margin: 0;
      }

      .material-icons {
        font-family: "Material Icons";
        font-weight: normal;
        font-style: normal;
        font-size: 24px;
        display: inline-block;
        line-height: 1;
        text-transform: none;
        letter-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        direction: ltr;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        font-feature-settings: "liga";
      }

      /* Container for overall layout */
      .container {
        max-width: 1280px; /* mx-auto */
        margin-left: auto;
        margin-right: auto;
        padding: 1rem; /* p-4 */
      }

      /* Header styles */
      .header {
        text-align: center;
        margin-bottom: 2rem; /* mb-8 */
      }

      .header h1 {
        font-size: 1.875rem; /* text-3xl */
        font-weight: 700; /* font-bold */
        color: #1d4ed8; /* text-blue-700 */
      }

      .header p {
        color: #4b5563; /* text-gray-600 */
        margin-top: 0.5rem; /* For spacing below h1 */
        font-size: 1rem; /* Default size */
      }

      .header .info-row {
        display: flex;
        justify-content: center;
        align-items: center;
        column-gap: 1rem; /* space-x-4 */
        font-size: 0.875rem; /* text-sm */
        color: #6b7280; /* text-gray-500 */
        margin-top: 0.5rem; /* mt-2 */
      }

      .header .info-row span {
        /* To ensure consistent spacing for text */
        white-space: nowrap;
      }

      /* Panel styles (for desktop and mobile) */
      .panel {
        background-color: #ffffff;
        border-radius: 0.5rem; /* rounded-lg */
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
        padding: 1.5rem; /* p-6 */
      }

      /* Filter and Search Bar Styles */
      .filter-section {
        display: flex;
        align-items: center;
        gap: 1rem; /* gap-4 */
        margin-bottom: 1.5rem; /* mb-6 */
        flex-wrap: wrap; /* Allow wrapping on smaller screens */
      }

      .filter-input-group {
        position: relative;
        flex-grow: 1; /* Allow it to take available space */
      }

      .filter-input-group .material-icons {
        position: absolute;
        left: 0.75rem; /* pl-3 */
        top: 50%;
        transform: translateY(-50%);
        color: #9ca3af; /* text-gray-400 */
      }

      .filter-input {
        width: 100%;
        padding: 0.5rem 1rem 0.5rem 2.5rem; /* pl-10 pr-2.5 py-2 */
        border: 1px solid #d1d5db; /* border-gray-300 */
        border-radius: 0.375rem; /* rounded-md */
        font-size: 0.875rem; /* text-sm */
        color: #1f2937; /* text-gray-900 */
        background-color: #ffffff; /* bg-white */
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
      }

      .filter-input:focus {
        outline: none;
        border-color: #3b82f6; /* border-blue-500 */
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* ring-blue-500/50 */
      }

      .filter-dropdown-group {
        position: relative;
      }

      .filter-dropdown {
        display: block; /* block */
        width: 100%;
        padding: 0.5rem 2.5rem 0.5rem 1rem; /* py-2 pl-3 pr-8 */
        background-color: #ffffff; /* bg-white */
        border: 1px solid #d1d5db; /* border-gray-300 */
        border-radius: 0.375rem; /* rounded-md */
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
        font-size: 0.875rem; /* text-sm */
        line-height: 1.25rem; /* leading-5 */
        color: #1f2937; /* text-gray-900 */
        appearance: none; /* remove default arrow */
        -webkit-appearance: none;
        -moz-appearance: none;
        cursor: pointer;
      }

      .filter-dropdown:focus {
        outline: none;
        border-color: #3b82f6; /* border-blue-500 */
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5); /* ring-blue-500/50 */
      }

      .filter-dropdown-icon {
        pointer-events: none;
        position: absolute;
        top: 50%;
        right: 0.5rem; /* px-2 */
        transform: translateY(-50%);
        color: #4b5563; /* text-gray-700 */
      }

      /* Table specific styles */
      .table-container {
        overflow-x: auto;
      }

      .data-table {
        min-width: 100%; /* min-w-full */
        border-collapse: collapse; /* For border-y and divide-y */
        border: 1px solid #e5e7eb; /* Border around the entire table */
      }

      .data-table thead {
        background-color: #f9fafb; /* bg-gray-50 */
      }

      .data-table th {
        padding: 0.75rem 1rem; /* px-4 py-3 */
        text-align: left;
        font-size: 0.75rem; /* text-xs */
        font-weight: 500; /* font-medium */
        color: #6b7280; /* text-gray-500 */
        text-transform: uppercase;
        letter-spacing: 0.05em; /* tracking-wider */
        border-bottom: 1px solid #e5e7eb; /* Divider below header */
      }

      .data-table tbody {
        background-color: #ffffff;
      }

      .data-table tbody tr {
        border-bottom: 1px solid #e5e7eb; /* divide-y divide-gray-200 */
      }

      .data-table tbody tr:last-child {
        border-bottom: none;
      }

      .data-table td {
        padding: 0.75rem 1rem; /* px-4 py-3 */
        white-space: nowrap;
        font-size: 0.875rem; /* text-sm */
        color: #374151; /* text-gray-700 */
        border-right: 1px solid #e5e7eb; /* Vertical dividers between cells */
      }

      .data-table td:last-child,
      .data-table th:last-child {
        border-right: none; /* No border on the last column */
      }

      /* Action buttons in table */
      .table-actions {
        display: flex;
        column-gap: 0.5rem; /* space-x-2 */
        flex-wrap: wrap; /* Allow buttons to wrap */
        justify-content: center; /* Center actions if they wrap */
      }

      .action-button {
        padding: 0.25rem 0.75rem; /* px-3 py-1 */
        border-radius: 0.375rem; /* rounded-md */
        font-size: 0.75rem; /* text-xs */
        display: flex;
        align-items: center;
        border: none; /* Remove default button border */
        cursor: pointer;
        transition-property: background-color, border-color, color, fill, stroke,
          opacity, box-shadow, transform, filter, backdrop-filter; /* transition */
        transition-duration: 150ms; /* duration-150 */
        text-decoration: none; /* For anchor tags */
      }

      .action-button .material-icons {
        font-size: 0.875rem; /* text-sm */
        margin-right: 0.25rem; /* mr-1 */
      }

      .action-button img {
        width: 0.75rem; /* w-3 */
        height: 0.75rem; /* h-3 */
        margin-right: 0.25rem; /* mr-1 */
      }

      .action-button.view {
        background-color: #dbeafe; /* bg-blue-100 */
        color: #2563eb; /* text-blue-600 */
      }

      .action-button.view:hover {
        background-color: #bfdbfe; /* hover:bg-blue-200 */
      }

      .action-button.print {
        background-color: #d1fae5; /* bg-green-100 */
        color: #059669; /* text-green-600 */
      }

      .action-button.print:hover {
        background-color: #a7f3d0; /* hover:bg-green-200 */
      }

      .action-button.send {
        background-color: #ccfbf1; /* bg-teal-100 */
        color: #0d9488; /* text-teal-600 */
      }

      .action-button.send:hover {
        background-color: #99f6e4; /* hover:bg-teal-200 */
      }

      .footer-text {
        font-size: 0.75rem; /* text-xs */
        color: #6b7280; /* text-gray-500 */
        margin-top: 0.5rem; /* mt-2 */
        text-align: right;
        padding-bottom: 0.5rem; /* For spacing at the bottom of the panel */
        padding-right: 0.5rem; /* To align with table padding */
      }

      /* Mobile specific styles */
      .mobile-panel {
        padding: 1rem; /* p-4 */
      }

      .mobile-panel h2 {
        font-size: 1.125rem; /* text-lg */
      }

      .mobile-filter-group {
        display: flex;
        align-items: center;
        gap: 0.75rem; /* gap-3 */
        margin-bottom: 1rem; /* mb-4 */
        flex-wrap: wrap;
      }

      .mobile-filter-group .filter-input-group,
      .mobile-filter-group .filter-dropdown-group {
        flex-basis: calc(50% - 0.375rem); /* Approximately w-1/2 with gap */
        min-width: 150px; /* Ensure input/select doesn't get too small */
      }

      .mobile-cards-container {
        display: flex;
        flex-direction: column;
        gap: 1rem; /* space-y-4 */
      }

      .mobile-card {
        background-color: #f9fafb; /* bg-gray-50 */
        padding: 1rem; /* p-4 */
        border-radius: 0.5rem; /* rounded-lg */
        box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06); /* shadow */
      }

      .mobile-card .owner-name {
        font-size: 0.875rem; /* text-sm */
        font-weight: 500; /* font-medium */
        color: #2b3543; /* text-gray-800 */
      }

      .mobile-card .society-name {
        font-size: 0.75rem; /* text-xs */
        color: #6b7280; /* text-gray-500 */
        margin-bottom: 0.5rem;
      }

      .mobile-card .grid-info {
        display: grid;
        grid-template-columns: repeat(1, minmax(0, 1fr)); /* grid-cols-1 */
        gap: 0.5rem; /* gap-2 */
        font-size: 0.75rem; /* text-xs */
        margin-bottom: 0.75rem; /* mb-3 */
      }

      .mobile-card .grid-info > div {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .mobile-card .grid-info span {
        font-weight: 500; /* font-medium */
        color: #4b5563; /* text-gray-600 */
      }

      .mobile-card .total-due {
        color: #2563eb; /* text-blue-600 */
        font-weight: 600; /* font-semibold */
      }

      .mobile-card .flex-actions {
        display: flex;
        column-gap: 0.5rem; /* space-x-2 */
        flex-wrap: wrap; /* Allow wrapping */
      }

      .mobile-card .flex-actions button,
      .mobile-card .flex-actions a {
        flex: 1 1 0%; /* flex-1 */
        min-width: 80px; /* Prevent shrinking too much */
        padding: 0.375rem 0.5rem; /* px-2 py-1.5 */
        border-radius: 0.375rem; /* rounded-md */
        font-size: 0.75rem; /* text-xs */
        display: flex;
        align-items: center;
        justify-content: center;
        border: none; /* Remove default button border */
        cursor: pointer;
      }

      /* Utility classes for responsive display */
      .hidden {
        display: none !important;
      }

      .block {
        display: block !important;
      }

      /* Responsive breakpoints */
      @media (min-width: 768px) {
        /* md breakpoint */
        .md\:block {
          display: block !important;
        }

        .md\:hidden {
          display: none !important;
        }

        .filter-input-group {
          flex-basis: 33.333333%; /* w-1/3 */
        }

        .filter-dropdown-group {
          flex-basis: 25%; /* w-1/4, adjust as needed */
        }
      }

      @media (min-width: 640px) {
        /* sm breakpoint */
        .mobile-card .grid-info {
          grid-template-columns: repeat(2, minmax(0, 1fr)); /* sm:grid-cols-2 */
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header class="header">
        <h1>A.F. Infosys</h1>
        <p>મિલકત પહેંચાની યાદી - વર્ષ : <span>2025-2026</span></p>
        <div class="info-row">
          <span>નામ : HASANPAR</span>
          <span>તાલુકો : Wankaner</span>
          <span>જીલ્લો : MORBI</span>
        </div>
      </header>

      <div class="panel hidden md:block">
        <div class="filter-section">
          <div class="filter-input-group">
            <span class="material-icons">search</span>
            <input
              type="text"
              id="desktopSearch"
              placeholder="માલિકનું નામ અથવા મિલકત નં. શોધો"
              class="filter-input"
              onkeyup="applyFilters()"
            />
          </div>
          <div class="filter-dropdown-group">
            <select
              id="desktopSocietyFilter"
              class="filter-dropdown"
              onchange="applyFilters()"
            >
              <option value="">બધી સોસાયટી</option>
            </select>
            <span class="material-icons filter-dropdown-icon"
              >arrow_drop_down</span
            >
          </div>
          <div class="filter-dropdown-group">
            <select
              id="desktopDueFilter"
              class="filter-dropdown"
              onchange="applyFilters()"
            >
              <option value="">બધા બાકી</option>
              <option value="hasDue">બાકી છે</option>
              <option value="noDue">બાકી નથી</option>
            </select>
            <span class="material-icons filter-dropdown-icon"
              >arrow_drop_down</span
            >
          </div>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead>
              <tr>
                <th rowspan="2">ક્રમ નં.</th>
                <th rowspan="2">માલિકનું નામ</th>
                <th rowspan="2">સોસાયટીનું નામ</th>
                <th rowspan="2">મોબાઈલ નં.</th>
                <th rowspan="2">મિલકત નં.</th>
                <th rowspan="2">પાછલું બાકી</th>
                <th rowspan="2">ચાલુ બાકી</th>
                <th rowspan="2">કુલ બાકી</th>
                <th colspan="3">Reciept</th>
              </tr>
              <tr>
                <th>View</th>
                <th>Print</th>
                <th>Send</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <p class="footer-text">(On Whatsapp)</p>
      </div>

      <div class="panel md:hidden mobile-panel">
        <h2
          style="
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.75rem;
          "
        >
          Property List
        </h2>
        <div class="mobile-filter-group">
          <div class="filter-input-group">
            <span class="material-icons">search</span>
            <input
              type="text"
              id="mobileSearch"
              placeholder="શોધો..."
              class="filter-input"
              onkeyup="applyFilters()"
            />
          </div>
          <div class="filter-dropdown-group">
            <select
              id="mobileSocietyFilter"
              class="filter-dropdown"
              onchange="applyFilters()"
            >
              <option value="">સોસાયટી</option>
            </select>
            <span class="material-icons filter-dropdown-icon"
              >arrow_drop_down</span
            >
          </div>
          <div class="filter-dropdown-group">
            <select
              id="mobileDueFilter"
              class="filter-dropdown"
              onchange="applyFilters()"
            >
              <option value="">બાકી</option>
              <option value="hasDue">બાકી છે</option>
              <option value="noDue">બાકી નથી</option>
            </select>
            <span class="material-icons filter-dropdown-icon"
              >arrow_drop_down</span
            >
          </div>
        </div>
        <div class="mobile-cards-container"></div>
        <p class="footer-text">(On Whatsapp)</p>
      </div>
    </div>

    <script>
      let allRecords = []; // Store all fetched records
      let societyNames = new Set(); // Store unique society names

      async function fetchDataFromSheet(sheetId) {
        const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json`;
        const res = await fetch(url);
        const text = await res.text();
        const json = JSON.parse(text.substring(47).slice(0, -2));
        const rows = json.table.rows.map((row) =>
          row.c.map((cell) => (cell ? cell.v : ""))
        );
        return rows;
      }

      function safeNumber(val) {
        const num = parseFloat(val);
        return isNaN(num) ? 0 : num;
      }

      function renderTableAndCards(recordsToRender) {
        const desktopTbody = document.querySelector(
          ".panel.hidden.md\\:block table tbody"
        );
        const mobileCardsContainer = document.querySelector(
          ".panel.md\\:hidden .mobile-cards-container"
        );

        // Clear existing content
        if (desktopTbody) desktopTbody.innerHTML = "";
        if (mobileCardsContainer) mobileCardsContainer.innerHTML = "";

        recordsToRender.forEach((row, index) => {
          // Skip header row if it's the original index 0
          if (row.originalIndex === 0) return;

          const current =
            safeNumber(row[19]) +
            safeNumber(row[20]) +
            safeNumber(row[21]) +
            safeNumber(row[22]) +
            safeNumber(row[23]) +
            safeNumber(row[24]);

          const previous =
            safeNumber(row[25]) +
            safeNumber(row[26]) +
            safeNumber(row[27]) +
            safeNumber(row[28]) +
            safeNumber(row[29]) +
            safeNumber(row[30]);

          const totalDue = previous + current;
          const milkatId = row.originalIndex; // Use original index for unique ID

          // Desktop Table Row
          if (desktopTbody) {
            const tr = document.createElement("tr");
            tr.innerHTML = `
                    <td>${milkatId}</td>
                    <td>${row[1]}</td>
                    <td>${row[4]}</td>
                    <td>${row[17]}</td>
                    <td>${row[5]}</td>
                    <td>${previous === null ? 0 : previous}</td>
                    <td>${current}</td>
                    <td>${totalDue}</td>
                    <td>
                        <div class="table-actions">
                            <a href="reciept_format.html?m_id=${milkatId}" class="action-button view">
                                <span class="material-icons">visibility</span>View
                            </a>
                            <a href="reciept_format.html?m_id=${milkatId}" class="action-button print">
                                <span class="material-icons">print</span>Print
                            </a>
                            <button class="action-button send whatsapp-btn" onclick="sendOnWhatsApp(${milkatId}, this)">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp icon"/> Send
                            </button>
                        </div>
                    </td>`;
            desktopTbody.appendChild(tr);
          }

          // Mobile Card
          if (mobileCardsContainer) {
            const div = document.createElement("div");
            div.className = "mobile-card";
            div.innerHTML = `
                    <div class="mb-2">
                        <p class="owner-name">${row[1]}</p>
                        <p class="society-name">સોસાયટી: ${row[4]}</p>
                    </div>
                    <div class="grid-info">
                        <div><span>મોબાઈલ નં.:</span> ${row[17]}</div>
                        <div><span>મિલકત નં.:</span> ${row[5]}</div>
                        <div><span>પાછલું બાકી:</span> ${
                          previous === null ? 0 : previous
                        }</div>
                        <div><span>ચાલુ બાકી:</span> ${current}</div>
                        <div style="grid-column: span 2 / span 2;"><span>કુલ બાકી:</span> <span class="total-due">${totalDue}</span></div>
                    </div>
                    <div class="flex-actions">
                        <a href="reciept_format.html?m_id=${milkatId}" class="action-button view">
                            <span class="material-icons">visibility</span>View
                        </a>
                        <a href="reciept_format.html?m_id=${milkatId}" class="action-button print">
                            <span class="material-icons">print</span>Print
                        </a>
                        <button class="action-button send whatsapp-btn" onclick="sendOnWhatsApp(${milkatId}, this)">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp icon"/> Send
                        </button>
                    </div>
                `;
            mobileCardsContainer.appendChild(div);
          }
        });
      }

      function populateSocietyFilters() {
        const desktopSelect = document.getElementById("desktopSocietyFilter");
        const mobileSelect = document.getElementById("mobileSocietyFilter");

        societyNames.forEach((name) => {
          const option1 = document.createElement("option");
          option1.value = name;
          option1.textContent = name;
          desktopSelect.appendChild(option1);

          const option2 = document.createElement("option");
          option2.value = name;
          option2.textContent = name;
          mobileSelect.appendChild(option2);
        });
      }

      function applyFilters() {
        const isMobile = window.innerWidth < 768;

        const searchTerm = (
          isMobile
            ? document.getElementById("mobileSearch").value
            : document.getElementById("desktopSearch").value
        ).toLowerCase();
        const selectedSociety = isMobile
          ? document.getElementById("mobileSocietyFilter").value
          : document.getElementById("desktopSocietyFilter").value;
        const selectedDueStatus = isMobile
          ? document.getElementById("mobileDueFilter").value
          : document.getElementById("desktopDueFilter").value;

        const filteredRecords = allRecords.filter((row) => {
          if (row.originalIndex === 0) return false; // Skip the header row from actual filtering

          const ownerName = row[1] ? row[1].toLowerCase() : "";
          const propertyNumber = row[5] ? row[5].toString().toLowerCase() : "";
          const societyName = row[4] ? row[4].toLowerCase() : "";

          const current =
            safeNumber(row[19]) +
            safeNumber(row[20]) +
            safeNumber(row[21]) +
            safeNumber(row[22]) +
            safeNumber(row[23]) +
            safeNumber(row[24]);

          const previous =
            safeNumber(row[25]) +
            safeNumber(row[26]) +
            safeNumber(row[27]) +
            safeNumber(row[28]) +
            safeNumber(row[29]) +
            safeNumber(row[30]);
          const totalDue = previous + current;

          // Search filter
          const matchesSearch =
            ownerName.includes(searchTerm) ||
            propertyNumber.includes(searchTerm);

          // Society filter
          const matchesSociety =
            selectedSociety === "" ||
            societyName === selectedSociety.toLowerCase();

          // Due status filter
          let matchesDueStatus = true;
          if (selectedDueStatus === "hasDue") {
            matchesDueStatus = totalDue > 0;
          } else if (selectedDueStatus === "noDue") {
            matchesDueStatus = totalDue === 0;
          }

          return matchesSearch && matchesSociety && matchesDueStatus;
        });

        renderTableAndCards(filteredRecords);
      }

      (async function () {
        const records = await fetchDataFromSheet(
          "1_bs5IQ0kDT_xVLwJdihe17yuyY_UfJRKCtwoGvO7T5Y"
        );

        // Store all records with their original index
        allRecords = records.map((record, index) => ({
          ...record,
          originalIndex: index,
        }));

        // Collect unique society names (starting from index 1 to skip header)
        for (let i = 1; i < allRecords.length; i++) {
          if (allRecords[i][4]) {
            // Column 4 is society name
            societyNames.add(allRecords[i][4]);
          }
        }

        populateSocietyFilters();
        applyFilters(); // Initial render with all data
      })();

      // --- JAVASCRIPT FUNCTION TO CALL THE BOT ---
      async function sendOnWhatsApp(milkatId, buttonElement) {
        // Provide visual feedback
        const originalText = buttonElement.innerHTML;
        buttonElement.innerHTML =
          '<span class="material-icons">send</span> Sending...';
        buttonElement.disabled = true;

        // The URL of YOUR bot's server
        const botServerUrl = "http://localhost:4444/send-receipt";

        try {
          const response = await fetch(botServerUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ m_id: milkatId }),
          });

          const result = await response.json();

          if (response.ok && result.success) {
            buttonElement.innerHTML =
              '<span class="material-icons">check_circle</span> Sent!';
            buttonElement.style.backgroundColor = "#d1fae5"; /* green-100 */
            buttonElement.style.color = "#059669"; /* green-600 */
          } else {
            throw new Error(result.message || "Failed to send.");
          }
        } catch (error) {
          console.error("Error sending WhatsApp message:", error);
          buttonElement.innerHTML =
            '<span class="material-icons">error</span> Error!';
          buttonElement.style.backgroundColor = "#fee2e2"; /* red-100 */
          buttonElement.style.color = "#ef4444"; /* red-600"; */
          alert("Failed to send WhatsApp message: " + error.message);
        } finally {
          // Optional: Reset button after a few seconds
          setTimeout(() => {
            buttonElement.innerHTML = originalText;
            buttonElement.style.backgroundColor = ""; // Revert to original color (handled by CSS class)
            buttonElement.style.color = ""; // Revert to original color (handled by CSS class)
            buttonElement.disabled = false;
          }, 4000);
        }
      }
    </script>
  </body>
</html>
